<!doctype html>
<html lang="ja">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Appleå¯©æŸ»ç”¨ç”»åƒã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
  <style>
    /* ---- canvas size: iPhone 6.5" (1284x2778 portrait, 2778x1284 landscape) / iPad 12.9" (2064x2752 portrait, 2752x2064 landscape) ---- */
    :root {
      --w-portrait: 1284px;
      --h-portrait: 2778px;
      --w-landscape: 2778px;
      --h-landscape: 1284px;

      /* layout knobs */
      --pad-x: 96px;
      --pad-y: 80px;
      --top-safe: 140px;
      --title-gap: 28px;
      --subtitle-gap: 44px;

      /* colors */
      --bg1: #0b1020;
      --bg2: #1d2a6b;
      --fg: #ffffff;
      --muted: rgba(255,255,255,.78);
      --card: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.14);
    }

    html, body {
      margin: 0;
      height: 100%;
      background: #111;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                   "Hiragino Sans", "Noto Sans JP", "Helvetica Neue", Arial, sans-serif;
    }

    /* Control Panel */
    .controls {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(17, 17, 17, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 20px;
      z-index: 1000;
      max-height: 50vh;
      overflow-y: auto;
    }

    .controls-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      align-items: start;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .control-group label {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .control-group input,
    .control-group textarea {
      padding: 10px 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: #fff;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.2s;
    }

    .control-group input:focus,
    .control-group textarea:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.4);
      background: rgba(255, 255, 255, 0.15);
    }

    .control-group textarea {
      resize: vertical;
      min-height: 60px;
    }

    .file-input-wrapper {
      position: relative;
    }

    .screenshot-inputs-row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .screenshot-inputs-row .file-input-wrapper {
      flex: 1;
      min-width: 140px;
    }

    .device-label {
      display: block;
      font-size: 11px;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 4px;
    }

    .file-input-wrapper input[type="file"] {
      position: absolute;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .file-input-label {
      display: block;
      padding: 10px 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: #fff;
      font-size: 14px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .file-input-label:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .file-input-label.has-file {
      background: rgba(76, 175, 80, 0.2);
      border-color: rgba(76, 175, 80, 0.4);
    }

    .btn {
      padding: 12px 24px;
      background: #007AFF;
      border: none;
      border-radius: 6px;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }

    .btn:hover {
      background: #0051D5;
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-download {
      background: #34C759;
      grid-column: 1 / -1;
      padding: 16px;
      font-size: 16px;
    }

    .btn-download:hover {
      background: #28A745;
    }

    .badge-inputs {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .badge-input-row {
      display: flex;
      gap: 8px;
    }

    .badge-input-row input {
      flex: 1;
    }

    .btn-remove-badge {
      padding: 10px 16px;
      background: rgba(255, 59, 48, 0.2);
      border: 1px solid rgba(255, 59, 48, 0.4);
      color: #ff3b30;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
    }

    .btn-remove-badge:hover {
      background: rgba(255, 59, 48, 0.3);
    }

    .btn-add-badge {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
    }

    .btn-add-badge:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    /* Slide Management */
    .slide-management {
      grid-column: 1 / -1;
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      padding: 16px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .slides-container {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      flex: 1;
    }

    .slide-item {
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .slide-item:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .slide-item.active {
      background: #007AFF;
      border-color: #007AFF;
    }

    .slide-item .remove-slide {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 20px;
      height: 20px;
      background: rgba(255, 59, 48, 0.9);
      border: none;
      border-radius: 50%;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      padding: 0;
    }

    .slide-item .remove-slide:hover {
      background: #ff3b30;
    }

    .btn-add-slide {
      padding: 8px 16px;
      background: rgba(52, 199, 89, 0.2);
      border: 1px solid rgba(52, 199, 89, 0.4);
      color: #34C759;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }

    .btn-add-slide:hover {
      background: rgba(52, 199, 89, 0.3);
    }

    /* Save/Load Controls */
    .save-load-controls {
      grid-column: 1 / -1;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .btn-save {
      background: #AF52DE;
    }

    .btn-save:hover {
      background: #9A3FC8;
    }

    .btn-load {
      background: #FF9500;
    }

    .btn-load:hover {
      background: #E6850E;
    }

    .btn-download-all {
      background: #5856D6;
    }

    .btn-download-all:hover {
      background: #4846C6;
    }

    .project-name-input {
      flex: 1;
      min-width: 200px;
    }

    /* Project List Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: #1a1a1a;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 24px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 700;
      color: #fff;
    }

    .modal-close {
      background: none;
      border: none;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .project-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .project-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      transition: all 0.2s;
    }

    .project-item:hover {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(255, 255, 255, 0.2);
    }

    .project-info {
      flex: 1;
    }

    .project-name-display {
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 4px;
    }

    .project-meta {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.6);
    }

    .project-actions {
      display: flex;
      gap: 8px;
    }

    .btn-project {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-load-project {
      background: #007AFF;
      color: #fff;
    }

    .btn-load-project:hover {
      background: #0051D5;
    }

    .btn-delete-project {
      background: rgba(255, 59, 48, 0.2);
      color: #ff3b30;
      border: 1px solid rgba(255, 59, 48, 0.4);
    }

    .btn-delete-project:hover {
      background: rgba(255, 59, 48, 0.3);
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: rgba(255, 255, 255, 0.6);
    }

    /* Orientation Selector */
    .orientation-selector {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .orientation-btn {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      flex: 1;
    }

    .orientation-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .orientation-btn.active {
      background: #007AFF;
      border-color: #007AFF;
    }

    /* Landscape Layout */
    .shot.landscape {
      width: var(--w-landscape);
      height: var(--h-landscape);
    }

    .shot.landscape .content {
      display: grid;
      grid-template-columns: auto 1fr;
      grid-template-rows: auto auto 1fr;
      align-items: center;
      padding: var(--pad-y) var(--pad-x);
      gap: 0 60px;
    }

    .shot.landscape .text-content {
      grid-column: 1;
      grid-row: 1;
      max-width: 800px;
    }

    .shot.landscape .stage {
      grid-column: 2;
      grid-row: 1 / -1;
      margin-top: 0;
      max-width: 2000px;
      padding-bottom: 0;
    }

    .shot.landscape .badges {
      grid-column: 1;
      grid-row: 2;
      margin-top: 40px;
      padding-bottom: 0;
      justify-content: flex-start;
    }

    .text-content {
      display: flex;
      flex-direction: column;
    }

    .shot.landscape .frame {
      width: 100%;
      max-width: 2000px;
      height: 1000px;
    }

    .shot.landscape .kicker {
      font-size: 36px;
    }

    .shot.landscape .title {
      font-size: 88px;
      margin-top: var(--title-gap);
    }

    .shot.landscape .subtitle {
      font-size: 42px;
      margin-top: var(--subtitle-gap);
    }

    /* The export surface */
    .shot {
      width: var(--w-portrait);
      height: var(--h-portrait);
      position: relative;
      overflow: hidden;
      background: radial-gradient(1200px 1200px at 20% 10%, rgba(255,255,255,.10), transparent 55%),
                  linear-gradient(160deg, var(--bg1), var(--bg2));
      color: var(--fg);
    }

    /* subtle noise-like overlay (optional) */
    .shot::after {
      content: "";
      position: absolute; inset: 0;
      background: repeating-linear-gradient(
        0deg,
        rgba(255,255,255,.02) 0px,
        rgba(255,255,255,.02) 1px,
        transparent 2px,
        transparent 6px
      );
      opacity: .35;
      pointer-events: none;
      mix-blend-mode: overlay;
    }

    .content {
      position: absolute;
      inset: 0;
      padding: var(--top-safe) var(--pad-x) var(--pad-x) var(--pad-x);
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .kicker {
      font-size: 44px;
      letter-spacing: .02em;
      color: var(--muted);
      font-weight: 700;
    }

    .title {
      margin-top: var(--title-gap);
      font-size: 112px;
      line-height: 1.06;
      font-weight: 900;
      letter-spacing: -0.02em;
    }

    .subtitle {
      margin-top: var(--subtitle-gap);
      font-size: 52px;
      line-height: 1.25;
      color: var(--muted);
      max-width: 980px;
      font-weight: 650;
    }

    /* ã‚¹ãƒ†ãƒ¼ã‚¸ã¯ã€Œãƒ†ã‚­ã‚¹ãƒˆã¨ãƒãƒƒã‚¸ã®é–“ã€ã ã‘ã€‚ä¸­èº«ã¯å¿…ãšã“ã®é«˜ã•ã«åã‚ã‚‹ï¼ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è¢«ã‚‰ãªã„ */
    .stage {
      margin-top: 96px;
      flex: 1;
      min-height: 0;
      display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 1fr;
      align-items: center;
      justify-items: center;
      padding-bottom: 0;
    }

    /* iPad ã®ã¨ãã¯ .content ã® padding-bottom ã®ä¸Šã¾ã§ã—ã‹ä½¿ã‚ãªã„ï¼ˆãƒãƒƒã‚¸ã¨çµ¶å¯¾ã«é‡ãªã‚‰ãªã„ï¼‰ */
    .shot.device-ipad .stage {
      margin-top: 72px;
      padding-bottom: 0;
      flex: 1;
      min-height: 0;
      align-items: center;
      justify-items: center;
    }

    /* A â€œdevice-ishâ€ card frame */
    .frame {
      width: 1020px;
      height: 1740px;
      max-width: 100%;
      max-height: 100%;
      border-radius: 84px;
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: 0 40px 120px rgba(0,0,0,.45);
      padding: 22px;
      position: relative;
      box-sizing: border-box;
      overflow: hidden;
    }

    /* iPad ã®ã¨ãã¯ç”»åƒã®å®Ÿå¯¸æ¯”ã§ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æ±ºã‚ã‚‹ï¼ˆJS ã§ aspect-ratio ã‚’ã‚»ãƒƒãƒˆï¼‰ */
    .shot.device-ipad.portrait .frame {
      height: 100%;
      width: auto;
      border-radius: 72px;
    }

    /* Screen image */
    .frame img {
      width: 100%;
      height: 100%;
      object-fit: contain;      /* å…ƒç”»åƒã®ç¸¦æ¨ªæ¯”ã‚’ç¶­æŒã—ã¦ãƒ•ãƒ¬ãƒ¼ãƒ å†…ã«åã‚ã‚‹ï¼ˆã¯ã¿å‡ºã•ãªã„ï¼‰ */
      object-position: center;
      border-radius: 62px;
      display: block;
      background: rgba(0,0,0,.25);
    }

    /* ãƒãƒƒã‚¸ã¯å¸¸ã«ãƒ•ãƒ­ãƒ¼å†…ã®æœ€ä¸‹éƒ¨ï¼ˆã‚¹ã‚¯ã‚·ãƒ§ã®ä¸‹ï¼‰ã€‚çµ¶å¯¾é…ç½®ã«ã—ãªã„ã®ã§è¢«ã‚‰ãªã„ */
    .badges {
      flex-shrink: 0;
      margin-top: 24px;
      padding-bottom: 24px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      align-items: center;
    }
    .badge {
      padding: 18px 26px;
      border-radius: 999px;
      background: rgba(255,255,255,.12);
      border: 1px solid rgba(255,255,255,.18);
      font-size: 34px;
      font-weight: 750;
      color: rgba(255,255,255,.92);
      backdrop-filter: blur(8px);
    }

    /* For dev preview in browser center */
    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
      padding-top: calc(50vh + 24px);
    }

    .preview-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 62px;
      display: block;
      background: rgba(0,0,0,.25);
    }

    .preview-image-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,.25);
      border-radius: 62px;
      color: rgba(255,255,255,.5);
      font-size: 18px;
    }
  </style>
</head>

<body>
  <div class="controls">
    <div class="controls-inner">
      <!-- Slide Management -->
      <div class="slide-management">
        <div class="slides-container" id="slides-container"></div>
        <button type="button" class="btn-add-slide" id="add-slide-btn">+ ã‚¹ãƒ©ã‚¤ãƒ‰è¿½åŠ </button>
      </div>

      <!-- Save/Load Controls -->
      <div class="save-load-controls">
        <input type="text" class="project-name-input" id="project-name" placeholder="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå" value="æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ" style="padding: 10px 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 6px; color: #fff; font-size: 14px; font-family: inherit;">
        <button type="button" class="btn btn-save" id="save-btn">ğŸ’¾ ä¿å­˜</button>
        <button type="button" class="btn btn-load" id="load-btn">ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§</button>
      </div>

      <div class="control-group">
        <label>ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚º</label>
        <div class="orientation-selector">
          <button type="button" class="orientation-btn active" data-device="iphone" id="device-iphone">ğŸ“± iPhone 6.5"</button>
          <button type="button" class="orientation-btn" data-device="ipad" id="device-ipad">ğŸ“± iPad 12.9"</button>
        </div>
      </div>

      <div class="control-group">
        <label>å‘ã</label>
        <div class="orientation-selector">
          <button type="button" class="orientation-btn active" data-orientation="portrait" id="orientation-portrait">ğŸ“± ç¸¦å‘ã</button>
          <button type="button" class="orientation-btn" data-orientation="landscape" id="orientation-landscape">ğŸ–¼ï¸ æ¨ªå‘ã</button>
        </div>
        <div style="margin-top: 8px; padding: 10px; background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 6px; font-size: 12px; color: rgba(255, 255, 255, 0.8); line-height: 1.5;">
          <strong>âš ï¸ æ¨ªå‘ãã‚²ãƒ¼ãƒ ã«ã¤ã„ã¦</strong><br>
          â€¢ æ¨ªå‘ãç”»åƒã¯æ¨ªå‘ãã®ã¾ã¾App Storeã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™<br>
          â€¢ iPhone: 2778Ã—1284px / iPad: 2732Ã—2048px<br>
          â€¢ ãŸã ã—ã€æ¤œç´¢çµæœã‚„ã‚µãƒ ãƒã‚¤ãƒ«ã§ã¯ç¸¦å‘ãã®æ ã«åã¾ã£ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™<br>
          â€¢ <strong>æœ€åˆã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ</strong>ã¯æ¤œç´¢çµæœã§è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€ç¸¦å‘ãã‚‚æ··ãœã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™<br>
          â€¢ æ¨ªå‘ãç”»åƒã¯3åˆ†å‰²ã•ã‚Œã¾ã›ã‚“ãŒã€ç¸¦å‘ãã®æ å†…ã«ç¸®å°è¡¨ç¤ºã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
        </div>
      </div>

      <div class="control-group">
        <label>Kickerï¼ˆä¸€è¡Œã®ãƒ¡ãƒªãƒƒãƒˆï¼‰</label>
        <input type="text" id="kicker" placeholder="Your app's one-line benefit" value="Your app's one-line benefit">
      </div>

      <div class="control-group">
        <label>ã‚¿ã‚¤ãƒˆãƒ«</label>
        <textarea id="title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ”¹è¡Œå¯ï¼‰">ä¸€ç¬ã§<br>ä¾¡å€¤ãŒä¼ã‚ã‚‹</textarea>
      </div>

      <div class="control-group">
        <label>ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«</label>
        <textarea id="subtitle" placeholder="èª¬æ˜æ–‡ï¼ˆæ”¹è¡Œå¯ï¼‰">ã“ã“ã«çŸ­ã„èª¬æ˜æ–‡ï¼ˆ1ã€œ2è¡Œï¼‰ã€‚<br>ã€Œä½•ãŒã§ãã‚‹ã‹ã€ã‚’å…·ä½“çš„ã«ã€‚</textarea>
      </div>

      <div class="control-group">
        <label>ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç”»åƒ</label>
        <div class="screenshot-inputs-row">
          <div class="file-input-wrapper">
            <span class="device-label">iPhoneç”¨</span>
            <input type="file" id="screenshot-iphone" accept="image/*">
            <label for="screenshot-iphone" class="file-input-label" id="file-label-iphone">ç”»åƒã‚’é¸æŠ</label>
          </div>
          <div class="file-input-wrapper">
            <span class="device-label">iPadç”¨</span>
            <input type="file" id="screenshot-ipad" accept="image/*">
            <label for="screenshot-ipad" class="file-input-label" id="file-label-ipad">ç”»åƒã‚’é¸æŠ</label>
          </div>
        </div>
        <div style="margin-top: 6px; font-size: 11px; color: rgba(255, 255, 255, 0.6); line-height: 1.4;">
          ğŸ’¡ iPhoneã¨iPadã§åˆ¥ã€…ã®ç”»åƒã‚’è¨­å®šã§ãã¾ã™ï¼ˆä»»æ„ã®ã‚µã‚¤ã‚ºã§OKãƒ»è‡ªå‹•èª¿æ•´ï¼‰<br>
          ğŸ“¦ ä¿å­˜ã•ã‚Œã‚‹ç”»åƒã‚µã‚¤ã‚ºï¼ˆApp Storeç”¨ï¼‰:<br>
          &nbsp;&nbsp;iPhone: ç¸¦å‘ã 1284Ã—2778px / æ¨ªå‘ã 2778Ã—1284px<br>
          &nbsp;&nbsp;iPad: ç¸¦å‘ã 2064Ã—2752px / æ¨ªå‘ã 2752Ã—2064px<br>
          ğŸ’¾ ç”»åƒã¯base64ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã•ã‚Œã‚‹ãŸã‚ã€å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“<br>
          âš ï¸ ãŸã ã—ã€LocalStorageã®å®¹é‡åˆ¶é™ï¼ˆç´„5-10MBï¼‰ã«æ³¨æ„ã—ã¦ãã ã•ã„
        </div>
      </div>

      <div class="control-group badge-inputs">
        <label>ãƒãƒƒã‚¸ï¼ˆè¤‡æ•°å¯ï¼‰</label>
        <div id="badge-inputs-container">
          <div class="badge-input-row">
            <input type="text" class="badge-input" placeholder="ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆ" value="é«˜é€Ÿ">
            <button type="button" class="btn-remove-badge">å‰Šé™¤</button>
          </div>
          <div class="badge-input-row">
            <input type="text" class="badge-input" placeholder="ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆ" value="ã‚·ãƒ³ãƒ—ãƒ«">
            <button type="button" class="btn-remove-badge">å‰Šé™¤</button>
          </div>
          <div class="badge-input-row">
            <input type="text" class="badge-input" placeholder="ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆ" value="ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ">
            <button type="button" class="btn-remove-badge">å‰Šé™¤</button>
          </div>
        </div>
        <button type="button" class="btn-add-badge" id="add-badge">+ ãƒãƒƒã‚¸ã‚’è¿½åŠ </button>
      </div>

      <button type="button" class="btn btn-download" id="download-btn">ğŸ“¥ ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
      <button type="button" class="btn btn-download-all" id="download-all-btn">ğŸ“¦ å…¨ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ZIPã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
    </div>
  </div>

  <div class="wrap">
    <div class="shot" id="shot">
      <div class="content">
        <div class="text-content">
          <div class="kicker" id="kicker-display">Your app's one-line benefit</div>
          <div class="title" id="title-display">ä¸€ç¬ã§<br>ä¾¡å€¤ãŒä¼ã‚ã‚‹</div>
          <div class="subtitle" id="subtitle-display">
            ã“ã“ã«çŸ­ã„èª¬æ˜æ–‡ï¼ˆ1ã€œ2è¡Œï¼‰ã€‚<br>
            ã€Œä½•ãŒã§ãã‚‹ã‹ã€ã‚’å…·ä½“çš„ã«ã€‚
          </div>
        </div>

        <div class="stage">
          <div class="frame" id="device-frame">
            <div class="preview-image-placeholder" id="image-placeholder">ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„</div>
            <img id="preview-image" class="preview-image" style="display: none;" alt="App UI screenshot">
          </div>
        </div>

        <div class="badges" id="badges-display">
          <div class="badge">é«˜é€Ÿ</div>
          <div class="badge">ã‚·ãƒ³ãƒ—ãƒ«</div>
          <div class="badge">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Project List Modal -->
  <div class="modal" id="project-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">ä¿å­˜ã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</h2>
        <button class="modal-close" id="modal-close">Ã—</button>
      </div>
      <div class="project-list" id="project-list">
        <!-- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
      </div>
      <div class="empty-state" id="empty-state" style="display: none;">
        ä¿å­˜ã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã›ã‚“
      </div>
      <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 12px; color: rgba(255,255,255,0.6);">
        ğŸ’¡ ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®LocalStorageã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™<br>
        ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€ä¿å­˜ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚‚å‰Šé™¤ã•ã‚Œã¾ã™
      </div>
    </div>
  </div>

  <script>
    // ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ç®¡ç†
    let slides = [];
    let currentSlideIndex = 0;

    // DOMè¦ç´ ã®å–å¾—
    const kickerInput = document.getElementById('kicker');
    const titleInput = document.getElementById('title');
    const subtitleInput = document.getElementById('subtitle');
    const screenshotIphoneInput = document.getElementById('screenshot-iphone');
    const screenshotIpadInput = document.getElementById('screenshot-ipad');
    const fileLabelIphone = document.getElementById('file-label-iphone');
    const fileLabelIpad = document.getElementById('file-label-ipad');
    const downloadBtn = document.getElementById('download-btn');
    const downloadAllBtn = document.getElementById('download-all-btn');
    const addBadgeBtn = document.getElementById('add-badge');
    const badgeInputsContainer = document.getElementById('badge-inputs-container');
    const shot = document.getElementById('shot');
    const slidesContainer = document.getElementById('slides-container');
    const addSlideBtn = document.getElementById('add-slide-btn');
    const saveBtn = document.getElementById('save-btn');
    const loadBtn = document.getElementById('load-btn');
    const projectNameInput = document.getElementById('project-name');
    const orientationPortraitBtn = document.getElementById('orientation-portrait');
    const orientationLandscapeBtn = document.getElementById('orientation-landscape');
    const deviceIphoneBtn = document.getElementById('device-iphone');
    const deviceIpadBtn = document.getElementById('device-ipad');
    const projectModal = document.getElementById('project-modal');
    
    // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã®çŠ¶æ…‹
    let currentDevice = 'iphone'; // 'iphone' or 'ipad'
    const modalClose = document.getElementById('modal-close');
    const projectList = document.getElementById('project-list');
    const emptyState = document.getElementById('empty-state');

    // è¡¨ç¤ºç”¨è¦ç´ 
    const kickerDisplay = document.getElementById('kicker-display');
    const titleDisplay = document.getElementById('title-display');
    const subtitleDisplay = document.getElementById('subtitle-display');
    const badgesDisplay = document.getElementById('badges-display');
    const previewImage = document.getElementById('preview-image');
    const imagePlaceholder = document.getElementById('image-placeholder');
    const deviceFrame = document.getElementById('device-frame');

    // iPad ã®ã¨ãã€èª­ã¿è¾¼ã‚“ã ç”»åƒã®ç¸¦æ¨ªæ¯”ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ã«åæ˜ ã™ã‚‹ï¼ˆæ½°ã•ãªã„ï¼‰
    function applyFrameAspectRatioFromImage() {
      if (!deviceFrame) return;
      if (currentDevice !== 'ipad') {
        deviceFrame.style.aspectRatio = '';
        return;
      }
      if (previewImage.src && previewImage.naturalWidth > 0 && previewImage.naturalHeight > 0) {
        deviceFrame.style.aspectRatio = String(previewImage.naturalWidth / previewImage.naturalHeight);
      } else {
        deviceFrame.style.aspectRatio = '';
      }
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®åˆæœŸåŒ–
    function initSlides() {
      if (slides.length === 0) {
        slides = [createDefaultSlide()];
      }
      currentSlideIndex = 0;
      // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã‚’åˆæœŸåŒ–ï¼ˆä¿å­˜ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
      setDevice(slides[0].device || 'iphone', true);
      renderSlides();
      loadSlideData(slides[0]);
    }

    // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã«å¿œã˜ãŸã‚µã‚¤ã‚ºã‚’å–å¾—
    function getDeviceSize(device, orientation) {
      if (device === 'ipad') {
        return orientation === 'landscape' 
          ? { width: 2752, height: 2064 }
          : { width: 2064, height: 2752 };
      } else { // iphone
        return orientation === 'landscape'
          ? { width: 2778, height: 1284 }
          : { width: 1284, height: 2778 };
      }
    }

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ãƒ©ã‚¤ãƒ‰ã®ä½œæˆ
    function createDefaultSlide() {
      return {
        id: Date.now(),
        device: 'iphone',
        orientation: 'portrait',
        kicker: "Your app's one-line benefit",
        title: "ä¸€ç¬ã§<br>ä¾¡å€¤ãŒä¼ã‚ã‚‹",
        subtitle: "ã“ã“ã«çŸ­ã„èª¬æ˜æ–‡ï¼ˆ1ã€œ2è¡Œï¼‰ã€‚<br>ã€Œä½•ãŒã§ãã‚‹ã‹ã€ã‚’å…·ä½“çš„ã«ã€‚",
        image: null,
        imageIphone: null,
        imageIpad: null,
        badges: ["é«˜é€Ÿ", "ã‚·ãƒ³ãƒ—ãƒ«", "ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ"]
      };
    }

    // ç¾åœ¨ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    function getCurrentSlideData() {
      const orientation = shot.classList.contains('landscape') ? 'landscape' : 'portrait';
      const slide = slides[currentSlideIndex];
      const imageIphone = currentDevice === 'iphone' ? (previewImage.src || null) : (slide?.imageIphone ?? slide?.image ?? null);
      const imageIpad = currentDevice === 'ipad' ? (previewImage.src || null) : (slide?.imageIpad ?? slide?.image ?? null);
      return {
        device: currentDevice,
        orientation: orientation,
        kicker: kickerInput.value || '',
        title: titleInput.value || '',
        subtitle: subtitleInput.value || '',
        image: previewImage.src || null,
        imageIphone: imageIphone,
        imageIpad: imageIpad,
        badges: Array.from(badgeInputsContainer.querySelectorAll('.badge-input'))
          .map(input => input.value.trim())
          .filter(v => v)
      };
    }

    // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã®åˆ‡ã‚Šæ›¿ãˆ
    function setDevice(device, skipSave = false) {
      if (!skipSave) {
        saveCurrentSlide();
      }
      currentDevice = device;
      const orientation = shot.classList.contains('landscape') ? 'landscape' : 'portrait';
      const size = getDeviceSize(device, orientation);
      
      // CSSå¤‰æ•°ã‚’æ›´æ–°
      document.documentElement.style.setProperty('--w-portrait', device === 'ipad' ? '2064px' : '1284px');
      document.documentElement.style.setProperty('--h-portrait', device === 'ipad' ? '2752px' : '2778px');
      document.documentElement.style.setProperty('--w-landscape', device === 'ipad' ? '2752px' : '2778px');
      document.documentElement.style.setProperty('--h-landscape', device === 'ipad' ? '2064px' : '1284px');
      
      // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
      if (device === 'ipad') {
        deviceIphoneBtn.classList.remove('active');
        deviceIpadBtn.classList.add('active');
      } else {
        deviceIpadBtn.classList.remove('active');
        deviceIphoneBtn.classList.add('active');
      }

      // ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ï¼ˆiPad ã®é…ç½®èª¿æ•´ç”¨ï¼‰
      shot.classList.toggle('device-ipad', device === 'ipad');
      shot.classList.toggle('device-iphone', device === 'iphone');
      
      // ã‚µã‚¤ã‚ºã‚’æ›´æ–°
      updateShotSize(orientation);
      // åˆ‡ã‚Šæ›¿ãˆå…ˆãƒ‡ãƒã‚¤ã‚¹ã®ç”»åƒã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«è¡¨ç¤º
      updatePreviewImageForCurrentDevice();
      updateScreenshotFileLabels();
    }

    // ã‚·ãƒ§ãƒƒãƒˆã®ã‚µã‚¤ã‚ºã‚’æ›´æ–°
    function updateShotSize(orientation) {
      const size = getDeviceSize(currentDevice, orientation);
      shot.style.width = size.width + 'px';
      shot.style.height = size.height + 'px';
    }

    // ç¾åœ¨ãƒ‡ãƒã‚¤ã‚¹ç”¨ã®ç”»åƒã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«è¡¨ç¤º
    function updatePreviewImageForCurrentDevice() {
      const slide = slides[currentSlideIndex];
      if (!slide) return;
      const imageSrc = currentDevice === 'ipad' ? (slide.imageIpad ?? slide.image) : (slide.imageIphone ?? slide.image);
      if (imageSrc) {
        previewImage.src = imageSrc;
        previewImage.style.display = 'block';
        imagePlaceholder.style.display = 'none';
        if (previewImage.complete) applyFrameAspectRatioFromImage();
      } else {
        previewImage.src = '';
        previewImage.style.display = 'none';
        imagePlaceholder.style.display = 'flex';
        applyFrameAspectRatioFromImage();
      }
    }

    // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç”¨ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ©ãƒ™ãƒ«ã®è¡¨ç¤ºã‚’æ›´æ–°
    function updateScreenshotFileLabels() {
      const slide = slides[currentSlideIndex];
      if (!slide) return;
      const hasIphone = !!(slide.imageIphone ?? slide.image);
      const hasIpad = !!(slide.imageIpad ?? slide.image);
      fileLabelIphone.textContent = hasIphone ? 'ç”»åƒãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™' : 'ç”»åƒã‚’é¸æŠ';
      fileLabelIphone.classList.toggle('has-file', hasIphone);
      fileLabelIpad.textContent = hasIpad ? 'ç”»åƒãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™' : 'ç”»åƒã‚’é¸æŠ';
      fileLabelIpad.classList.toggle('has-file', hasIpad);
    }

    // å‘ãã®åˆ‡ã‚Šæ›¿ãˆ
    function setOrientation(orientation, skipSave = false) {
      if (orientation === 'landscape') {
        shot.classList.add('landscape');
        shot.classList.remove('portrait');
        orientationPortraitBtn.classList.remove('active');
        orientationLandscapeBtn.classList.add('active');
      } else {
        shot.classList.remove('landscape');
        shot.classList.add('portrait');
        orientationPortraitBtn.classList.add('active');
        orientationLandscapeBtn.classList.remove('active');
      }
      updateShotSize(orientation);
      if (!skipSave) {
        saveCurrentSlide();
      }
    }

    // åˆæœŸåŒ–æ™‚ã«portraitã‚¯ãƒ©ã‚¹ã‚’è¨­å®š
    shot.classList.add('portrait');

    // ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’UIã«åæ˜ 
    function loadSlideData(slide) {
      // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã®è¨­å®šï¼ˆä¿å­˜ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
      const device = slide.device || 'iphone';
      setDevice(device, true);
      
      // å‘ãã®è¨­å®šï¼ˆä¿å­˜ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
      const orientation = slide.orientation || 'portrait';
      setOrientation(orientation, true);

      kickerInput.value = slide.kicker || '';
      titleInput.value = slide.title || '';
      subtitleInput.value = slide.subtitle || '';
      
      // ãƒãƒƒã‚¸å…¥åŠ›ã®æ›´æ–°
      badgeInputsContainer.innerHTML = '';
      if (slide.badges && slide.badges.length > 0) {
        slide.badges.forEach(badge => {
          addBadgeInput(badge);
        });
      } else {
        addBadgeInput('');
      }

      // ç”»åƒã®æ›´æ–°ï¼ˆãƒ‡ãƒã‚¤ã‚¹åˆ¥: imageIphone / imageIpadã€æ—§ãƒ‡ãƒ¼ã‚¿ã¯ image ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
      const imageSrc = (slide.device || currentDevice) === 'ipad'
        ? (slide.imageIpad ?? slide.image)
        : (slide.imageIphone ?? slide.image);
      if (imageSrc) {
        previewImage.src = imageSrc;
        previewImage.style.display = 'block';
        imagePlaceholder.style.display = 'none';
      } else {
        previewImage.src = '';
        previewImage.style.display = 'none';
        imagePlaceholder.style.display = 'flex';
      }
      updateScreenshotFileLabels();
      if (previewImage.complete) applyFrameAspectRatioFromImage();

      // è¡¨ç¤ºã®æ›´æ–°
      updateDisplay();
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰ã®ä¿å­˜ï¼ˆç¾åœ¨ã®å…¥åŠ›å†…å®¹ã‚’ä¿å­˜ï¼‰
    function saveCurrentSlide() {
      if (slides.length === 0) {
        // ã‚¹ãƒ©ã‚¤ãƒ‰ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆ
        slides = [createDefaultSlide()];
        currentSlideIndex = 0;
      }
      
      if (currentSlideIndex >= 0 && currentSlideIndex < slides.length) {
        const currentData = getCurrentSlideData();
        slides[currentSlideIndex] = {
          id: slides[currentSlideIndex].id || Date.now(),
          ...slides[currentSlideIndex],
          ...currentData
        };
      }
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰ã®èª­ã¿è¾¼ã¿
    function loadSlide(index) {
      if (index < 0 || index >= slides.length) return;
      
      // ç¾åœ¨ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ç¢ºå®Ÿã«ä¿å­˜ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‰1ã‚’å«ã‚€ï¼‰
      saveCurrentSlide();
      
      currentSlideIndex = index;
      loadSlideData(slides[index]);
      renderSlides();
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰ã®è¿½åŠ 
    function addSlide() {
      saveCurrentSlide();
      const newSlide = createDefaultSlide();
      slides.push(newSlide);
      currentSlideIndex = slides.length - 1;
      loadSlideData(newSlide);
      renderSlides();
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰ã®å‰Šé™¤
    function removeSlide(index) {
      if (slides.length <= 1) {
        alert('æœ€ä½1ã¤ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒå¿…è¦ã§ã™ã€‚');
        return;
      }
      
      if (confirm('ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
        slides.splice(index, 1);
        if (currentSlideIndex >= slides.length) {
          currentSlideIndex = slides.length - 1;
        }
        loadSlide(currentSlideIndex);
      }
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰ä¸€è¦§ã®è¡¨ç¤º
    function renderSlides() {
      slidesContainer.innerHTML = '';
      slides.forEach((slide, index) => {
        const slideItem = document.createElement('div');
        slideItem.className = `slide-item ${index === currentSlideIndex ? 'active' : ''}`;
        slideItem.textContent = `ã‚¹ãƒ©ã‚¤ãƒ‰ ${index + 1}`;
        slideItem.onclick = () => loadSlide(index);
        
        if (slides.length > 1) {
          const removeBtn = document.createElement('button');
          removeBtn.className = 'remove-slide';
          removeBtn.textContent = 'Ã—';
          removeBtn.onclick = (e) => {
            e.stopPropagation();
            removeSlide(index);
          };
          slideItem.appendChild(removeBtn);
        }
        
        slidesContainer.appendChild(slideItem);
      });
    }

    // ãƒãƒƒã‚¸å…¥åŠ›ã®è¿½åŠ 
    function addBadgeInput(value = '') {
      const row = document.createElement('div');
      row.className = 'badge-input-row';
      row.innerHTML = `
        <input type="text" class="badge-input" placeholder="ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆ" value="${value}">
        <button type="button" class="btn-remove-badge">å‰Šé™¤</button>
      `;
      badgeInputsContainer.appendChild(row);
      
      const removeBtn = row.querySelector('.btn-remove-badge');
      const input = row.querySelector('.badge-input');
      
      removeBtn.addEventListener('click', () => {
        row.remove();
        updateBadges();
        saveCurrentSlide();
      });
      
      input.addEventListener('input', () => {
        updateBadges();
        saveCurrentSlide();
      });
    }

    // è¡¨ç¤ºã®æ›´æ–°
    function updateDisplay() {
      kickerDisplay.textContent = kickerInput.value || 'Your app\'s one-line benefit';
      const titleText = titleInput.value || 'ä¸€ç¬ã§<br>ä¾¡å€¤ãŒä¼ã‚ã‚‹';
      titleDisplay.innerHTML = titleText.replace(/\n/g, '<br>');
      const subtitleText = subtitleInput.value || 'ã“ã“ã«çŸ­ã„èª¬æ˜æ–‡ï¼ˆ1ã€œ2è¡Œï¼‰ã€‚<br>ã€Œä½•ãŒã§ãã‚‹ã‹ã€ã‚’å…·ä½“çš„ã«ã€‚';
      subtitleDisplay.innerHTML = subtitleText.replace(/\n/g, '<br>');
      updateBadges();
    }

    // ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã®æ›´æ–°
    kickerInput.addEventListener('input', () => {
      updateDisplay();
      saveCurrentSlide();
    });

    titleInput.addEventListener('input', () => {
      updateDisplay();
      saveCurrentSlide();
    });

    subtitleInput.addEventListener('input', () => {
      updateDisplay();
      saveCurrentSlide();
    });

    // ç”»åƒé¸æŠï¼ˆiPhoneç”¨ï¼‰
    screenshotIphoneInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const dataUrl = event.target.result;
          if (slides[currentSlideIndex]) slides[currentSlideIndex].imageIphone = dataUrl;
          if (currentDevice === 'iphone') {
            previewImage.src = dataUrl;
            previewImage.style.display = 'block';
            imagePlaceholder.style.display = 'none';
          }
          updateScreenshotFileLabels();
          saveCurrentSlide();
        };
        reader.readAsDataURL(file);
      }
      e.target.value = '';
    });

    // ç”»åƒé¸æŠï¼ˆiPadç”¨ï¼‰
    screenshotIpadInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
          const dataUrl = event.target.result;
          if (slides[currentSlideIndex]) slides[currentSlideIndex].imageIpad = dataUrl;
          if (currentDevice === 'ipad') {
            previewImage.src = dataUrl;
            previewImage.style.display = 'block';
            imagePlaceholder.style.display = 'none';
          }
          updateScreenshotFileLabels();
          saveCurrentSlide();
        };
        reader.readAsDataURL(file);
      }
      e.target.value = '';
    });

    // ç”»åƒèª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«ç¸¦æ¨ªæ¯”ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ã«åæ˜ ï¼ˆiPadãƒ»ç¸¦æ¨ªæ¯”ã‚’æ½°ã•ãªã„ï¼‰
    previewImage.addEventListener('load', applyFrameAspectRatioFromImage);

    // ãƒãƒƒã‚¸ã®è¿½åŠ 
    addBadgeBtn.addEventListener('click', () => {
      addBadgeInput();
    });

    // ãƒãƒƒã‚¸ã®å‰Šé™¤
    badgeInputsContainer.addEventListener('click', (e) => {
      if (e.target.classList.contains('btn-remove-badge')) {
        e.target.closest('.badge-input-row').remove();
        updateBadges();
        saveCurrentSlide();
      }
    });

    // ãƒãƒƒã‚¸å…¥åŠ›ã®æ›´æ–°
    badgeInputsContainer.addEventListener('input', (e) => {
      if (e.target.classList.contains('badge-input')) {
        updateBadges();
        saveCurrentSlide();
      }
    });

    // ãƒãƒƒã‚¸è¡¨ç¤ºã®æ›´æ–°
    function updateBadges() {
      const inputs = badgeInputsContainer.querySelectorAll('.badge-input');
      badgesDisplay.innerHTML = '';
      inputs.forEach(input => {
        if (input.value.trim()) {
          const badge = document.createElement('div');
          badge.className = 'badge';
          badge.textContent = input.value.trim();
          badgesDisplay.appendChild(badge);
        }
      });
    }

    // ã‚¹ãƒ©ã‚¤ãƒ‰è¿½åŠ ãƒœã‚¿ãƒ³
    addSlideBtn.addEventListener('click', addSlide);

    // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã®åˆ‡ã‚Šæ›¿ãˆ
    deviceIphoneBtn.addEventListener('click', () => {
      setDevice('iphone');
    });

    deviceIpadBtn.addEventListener('click', () => {
      setDevice('ipad');
    });

    // å‘ãã®åˆ‡ã‚Šæ›¿ãˆ
    orientationPortraitBtn.addEventListener('click', () => {
      setOrientation('portrait');
    });

    orientationLandscapeBtn.addEventListener('click', () => {
      setOrientation('landscape');
    });

    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã®å–å¾—
    function getAllProjects() {
      const projectsJson = localStorage.getItem('appStoreGenerator_projects');
      return projectsJson ? JSON.parse(projectsJson) : [];
    }

    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã®ä¿å­˜
    function saveAllProjects(projects) {
      localStorage.setItem('appStoreGenerator_projects', JSON.stringify(projects));
    }

    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã®è¡¨ç¤º
    function renderProjectList() {
      const projects = getAllProjects();
      projectList.innerHTML = '';
      
      if (projects.length === 0) {
        emptyState.style.display = 'block';
        projectList.style.display = 'none';
      } else {
        emptyState.style.display = 'none';
        projectList.style.display = 'flex';
        
        projects.forEach((project, index) => {
          const item = document.createElement('div');
          item.className = 'project-item';
          
          const savedDate = new Date(project.savedAt);
          const dateStr = savedDate.toLocaleString('ja-JP', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit'
          });
          
          item.innerHTML = `
            <div class="project-info">
              <div class="project-name-display">${project.name}</div>
              <div class="project-meta">
                ã‚¹ãƒ©ã‚¤ãƒ‰æ•°: ${project.slides.length}æš | ä¿å­˜æ—¥æ™‚: ${dateStr}
              </div>
            </div>
            <div class="project-actions">
              <button class="btn-project btn-load-project" data-index="${index}">èª­ã¿è¾¼ã¿</button>
              <button class="btn-project btn-delete-project" data-index="${index}">å‰Šé™¤</button>
            </div>
          `;
          
          projectList.appendChild(item);
        });
      }
    }

    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¿å­˜
    saveBtn.addEventListener('click', () => {
      // ç¾åœ¨è¡¨ç¤ºä¸­ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ç¢ºå®Ÿã«ä¿å­˜ï¼ˆã‚¹ãƒ©ã‚¤ãƒ‰1ã‚’å«ã‚€ï¼‰
      saveCurrentSlide();
      
      // ã‚¹ãƒ©ã‚¤ãƒ‰ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆ
      if (slides.length === 0) {
        slides = [createDefaultSlide()];
        currentSlideIndex = 0;
        saveCurrentSlide();
      }
      
      const projectName = projectNameInput.value || 'æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ';
      const projectData = {
        id: Date.now(),
        name: projectName,
        slides: JSON.parse(JSON.stringify(slides)), // ãƒ‡ã‚£ãƒ¼ãƒ—ã‚³ãƒ”ãƒ¼
        savedAt: new Date().toISOString()
      };
      
      const projects = getAllProjects();
      
      // åŒã˜åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      const existingIndex = projects.findIndex(p => p.name === projectName);
      if (existingIndex >= 0) {
        if (confirm(`ã€Œ${projectName}ã€ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™ã€‚ä¸Šæ›¸ãã—ã¾ã™ã‹ï¼Ÿ`)) {
          projects[existingIndex] = projectData;
        } else {
          return;
        }
      } else {
        projects.push(projectData);
      }
      
      saveAllProjects(projects);
      alert('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
    });

    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ãƒ¢ãƒ¼ãƒ€ãƒ«ã®è¡¨ç¤º
    loadBtn.addEventListener('click', () => {
      renderProjectList();
      projectModal.classList.add('active');
    });

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
    modalClose.addEventListener('click', () => {
      projectModal.classList.remove('active');
    });

    projectModal.addEventListener('click', (e) => {
      if (e.target === projectModal) {
        projectModal.classList.remove('active');
      }
    });

    // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª­ã¿è¾¼ã¿
    projectList.addEventListener('click', (e) => {
      const index = e.target.getAttribute('data-index');
      if (!index) return;
      
      if (e.target.classList.contains('btn-load-project')) {
        const projects = getAllProjects();
        const project = projects[parseInt(index)];
        
        if (confirm('ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸Šæ›¸ãã—ã¦èª­ã¿è¾¼ã¿ã¾ã™ã‹ï¼Ÿ')) {
          try {
            slides = project.slides || [createDefaultSlide()];
            projectNameInput.value = project.name || 'æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ';
            currentSlideIndex = 0;
            loadSlide(0);
            projectModal.classList.remove('active');
            alert('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼');
          } catch (error) {
            alert('ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            console.error(error);
          }
        }
      } else if (e.target.classList.contains('btn-delete-project')) {
        const projects = getAllProjects();
        const project = projects[parseInt(index)];
        
        if (confirm(`ã€Œ${project.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚`)) {
          projects.splice(parseInt(index), 1);
          saveAllProjects(projects);
          renderProjectList();
        }
      }
    });

    // ç”»åƒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆç¾åœ¨ã®ã‚¹ãƒ©ã‚¤ãƒ‰ï¼‰
    downloadBtn.addEventListener('click', async () => {
      saveCurrentSlide();
      try {
        const isLandscape = shot.classList.contains('landscape');
        const orientation = isLandscape ? 'landscape' : 'portrait';
        const size = getDeviceSize(currentDevice, orientation);
        
        const canvas = await html2canvas(shot, {
          width: size.width,
          height: size.height,
          scale: 1,
          useCORS: true,
          logging: false,
          backgroundColor: '#0b1020'
        });

        const link = document.createElement('a');
        const deviceName = currentDevice === 'ipad' ? 'ipad' : 'iphone';
        link.download = `app-store-screenshot-${deviceName}-${orientation}-${currentSlideIndex + 1}-${Date.now()}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();
      } catch (error) {
        console.error('ç”»åƒç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
        alert('ç”»åƒã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚html2canvasãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¿…è¦ã§ã™ã€‚');
      }
    });

    // å…¨ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆZIPå½¢å¼ï¼‰
    downloadAllBtn.addEventListener('click', async () => {
      saveCurrentSlide();
      const currentIndex = currentSlideIndex;
      
      try {
        const zip = new JSZip();
        const timestamp = Date.now();
        
        for (let i = 0; i < slides.length; i++) {
          loadSlide(i);
          await new Promise(resolve => setTimeout(resolve, 500)); // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾…æ©Ÿ
          
          const isLandscape = shot.classList.contains('landscape');
          const orientation = isLandscape ? 'landscape' : 'portrait';
          const slideDevice = slides[i].device || currentDevice;
          const size = getDeviceSize(slideDevice, orientation);
          
          const canvas = await html2canvas(shot, {
            width: size.width,
            height: size.height,
            scale: 1,
            useCORS: true,
            logging: false,
            backgroundColor: '#0b1020'
          });

          // ç”»åƒã‚’base64ã«å¤‰æ›
          const imageData = canvas.toDataURL('image/png');
          // base64ã®ãƒ‡ãƒ¼ã‚¿éƒ¨åˆ†ã‚’å–å¾—ï¼ˆdata:image/png;base64, ã‚’é™¤ãï¼‰
          const base64Data = imageData.split(',')[1];
          
          // ZIPã«è¿½åŠ 
          const deviceName = slideDevice === 'ipad' ? 'ipad' : 'iphone';
          const filename = `screenshot-${deviceName}-${orientation}-${String(i + 1).padStart(2, '0')}.png`;
          zip.file(filename, base64Data, { base64: true });
        }
        
        // ZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        const zipBlob = await zip.generateAsync({ type: 'blob' });
        const link = document.createElement('a');
        link.download = `app-store-screenshots-${timestamp}.zip`;
        link.href = URL.createObjectURL(zipBlob);
        link.click();
        
        // ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾
        URL.revokeObjectURL(link.href);
        
        loadSlide(currentIndex); // å…ƒã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«æˆ»ã™
        alert(`${slides.length}æšã®ç”»åƒã‚’ZIPãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼`);
      } catch (error) {
        console.error('ç”»åƒç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
        alert('ç”»åƒã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚JSZipãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¿…è¦ã§ã™ã€‚');
        loadSlide(currentIndex);
      }
    });

    // åˆæœŸåŒ–
    initSlides();
  </script>

  <!-- html2canvas library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <!-- JSZip library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</body>
</html>

